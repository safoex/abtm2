import:
  memory:
    scripts:
      - "../src/core/memory/js/duktape/memory_duktape.js"
      - "../../../libs/rosmsgjs/ros_embed_description.js"
      - "../../../libs/rosmsgjs/ros_embed.js"
    reload: yes
  yaml:
    - "../test/io/autoreload/templates.yaml"
    - this

vars:
  a: ROS.std_msgs.Float32()
  b: ROS.std_msgs.Float32()
  c: "{'data': 0}"
  time: 1
  z: 2
#  a: 0
#  b: 0
#  c: 0

ros:
  /abtm/a:
    type: subscriber
    var: a
    msg: std_msgs/Float32

  /abtm/b:
    type: subscriber
    var: b
    msg: std_msgs/Float32

  /abtm/c:
    type: publisher
    var: c
    msg: std_msgs/Float32



nodes:
  root:
    parent: ""
    type: sequence
    children: [time_branch, timer_branch]

  time_branch:
    type: t/set_time
    to: time

  timer_branch:
    type: t/tick_every
    period_secs: 1
    time_var: time
    child: inc

  inc:
    type: action
    expr: c.data = c.data + 2

#  tick_every_branch:
#    type:


#  C:
#    parent: root
#    type: condition
#    expr: "a < b"
#    true_state: S
#    false_state: R